<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Legend for color ramp maps — legend_ramp • climr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Legend for color ramp maps — legend_ramp"><meta name="description" content="This function plots a map legend that handles logarithmic scaling"><meta property="og:description" content="This function plots a map legend that handles logarithmic scaling"><meta property="og:image" content="https://bcgov.github.io/climr/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">climr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>`climr` workflows</h6></li>
    <li><a class="dropdown-item" href="../articles/climr_workflow_beg.html">Beginner `climr` workflow</a></li>
    <li><a class="dropdown-item" href="../articles/climr_workflow_int.html">Intermediate `climr` workflow</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Methods</h6></li>
    <li><a class="dropdown-item" href="../articles/methods_downscaling.html">`climr` downscaling methods</a></li>
    <li><a class="dropdown-item" href="../articles/methods_mosaic.html">The climr mosaic of North American climatologies</a></li>
    <li><a class="dropdown-item" href="../articles/methods_ensembleSelection.html">Global climate model ensemble selection</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Guidance</h6></li>
    <li><a class="dropdown-item" href="../articles/guidance_ensembleSelection.html">Climate model and scenario selection</a></li>
    <li><a class="dropdown-item" href="../articles/guidance_timeSeries.html">Gridded observational time series</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Known Issues</h6></li>
    <li><a class="dropdown-item" href="../articles/knownIssues_DiscrepanciesWithClimateNA.html">Discrepancies with ClimateNA</a></li>
    <li><a class="dropdown-item" href="../articles/knownIssues_customRefmap.html">Suboptimal handling of custom refmaps in `downscale_core`</a></li>
    <li><a class="dropdown-item" href="../articles/knownIssues_spatialAnomaly.html">Spatial anomaly near Prince George in `refmap_climatena`</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Legend for color ramp maps</h1>

      <div class="d-none name"><code>legend_ramp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function plots a map legend that handles logarithmic scaling</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">legend_ramp</span><span class="op">(</span></span>
<span>  <span class="va">r</span>,</span>
<span>  <span class="va">title</span>,</span>
<span>  <span class="va">ColScheme</span>,</span>
<span>  <span class="va">breaks</span>,</span>
<span>  pos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.23</span>, <span class="fl">0.1</span>, <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  log.relative <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  horizontal <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  title.height <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-r">r<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>A spatial raster object, typically from the <code>terra</code> package.</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>Character. The title for the legend.</p></dd>


<dt id="arg-colscheme">ColScheme<a class="anchor" aria-label="anchor" href="#arg-colscheme"></a></dt>
<dd><p>Character vector. Specifies the colors used for the legend. Typically corresponds
to the color scheme applied to the raster data visualization.</p></dd>


<dt id="arg-breaks">breaks<a class="anchor" aria-label="anchor" href="#arg-breaks"></a></dt>
<dd><p>Numeric vector. Defines the breakpoints for the legend, determining how the range
of the raster is divided into intervals corresponding to the colors in <code>ColScheme</code>.</p></dd>


<dt id="arg-pos">pos<a class="anchor" aria-label="anchor" href="#arg-pos"></a></dt>
<dd><p>Numeric vector of length 4. Defines the position of the legend as
proportions of the raster extent. The format is <code>c(xmin, xmax, ymin, ymax)</code>.</p></dd>


<dt id="arg-log">log<a class="anchor" aria-label="anchor" href="#arg-log"></a></dt>
<dd><p>Numeric or NULL. The base of the logarithm used to compute legend labels.
If <code>NULL</code>, values are displayed as-is.</p></dd>


<dt id="arg-log-relative">log.relative<a class="anchor" aria-label="anchor" href="#arg-log-relative"></a></dt>
<dd><p>logical. If TRUE, legend labels represent a percent difference.</p></dd>


<dt id="arg-horizontal">horizontal<a class="anchor" aria-label="anchor" href="#arg-horizontal"></a></dt>
<dd><p>Logical. Should the legend be drawn horizontally? Default is <code>FALSE</code>.</p></dd>


<dt id="arg-title-height">title.height<a class="anchor" aria-label="anchor" href="#arg-title-height"></a></dt>
<dd><p>Numeric. Scaling factor for the height of the legend title relative to the legend size.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>NULL. A plot of the legend is drawn in the current plotting device. The function does not return any value.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function uses the extent of the raster object to determine the positioning and size of
the legend. The legend can be oriented either horizontally or vertically, and logarithmic
scaling is applied to the labels if the <code>log</code> parameter is specified.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## get the sample digital elevation model (dem) provided with `climr`</span></span></span>
<span class="r-in"><span><span class="va">dem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"dem_vancouver"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/wrap.html" class="external-link">unwrap</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## A simple climr query.</span></span></span>
<span class="r-in"><span><span class="co">## This will return the observed 1961-1990 normals for the raster grid points.</span></span></span>
<span class="r-in"><span><span class="va">var</span> <span class="op">&lt;-</span> <span class="st">"MAP"</span></span></span>
<span class="r-in"><span><span class="va">clim</span> <span class="op">&lt;-</span> <span class="fu"><a href="downscale.html">downscale</a></span><span class="op">(</span><span class="va">dem</span>, which_refmap <span class="op">=</span> <span class="st">"refmap_climr"</span>, vars <span class="op">=</span> <span class="va">var</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Welcome to climr!</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Not fully cached :( Will download more</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloading new data from refmap_climr...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Caching data...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downscaling...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Climate vars...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Appending... [MAP]</span>
<span class="r-in"><span><span class="co">## log-transform precipitation for more meaningful scaling</span></span></span>
<span class="r-in"><span><span class="va">clim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log2</a></span><span class="op">(</span><span class="va">clim</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## increment for the ramp</span></span></span>
<span class="r-in"><span><span class="va">inc</span><span class="op">=</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">clim</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fl">500</span></span></span>
<span class="r-in"><span><span class="co">## color breaks</span></span></span>
<span class="r-in"><span><span class="va">breaks</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">clim</span><span class="op">)</span><span class="op">)</span><span class="op">-</span><span class="va">inc</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">clim</span><span class="op">)</span><span class="op">)</span><span class="op">+</span><span class="va">inc</span>, <span class="va">inc</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## color scheme</span></span></span>
<span class="r-in"><span><span class="va">ColScheme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/flip.html" class="external-link">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">breaks</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span>, <span class="st">"GnBu"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">clim</span>, col<span class="op">=</span><span class="va">ColScheme</span>, breaks<span class="op">=</span><span class="va">breaks</span>, legend<span class="op">=</span><span class="cn">FALSE</span>, main<span class="op">=</span><span class="st">""</span>, mar<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">legend_ramp</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">clim</span>,</span></span>
<span class="r-in"><span>  title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">var</span>, <span class="st">"(mm)"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ColScheme <span class="op">=</span> <span class="va">ColScheme</span>,</span></span>
<span class="r-in"><span>  breaks <span class="op">=</span> <span class="va">breaks</span>,</span></span>
<span class="r-in"><span>  pos<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.45</span>, <span class="fl">0.1</span>, <span class="fl">0.125</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  log <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  horizontal <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="legend_ramp-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kiri Daust, Colin Mahony, Bruno Tremblay, Ceres Barros, Province of British Columbia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

